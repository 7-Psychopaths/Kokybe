{% load i18n %}
{% load disable from damis %}

{% trans 'parameters' %}
{% for form in formset.forms %}
{% if form.initial.parameter %}
    {% if form.initial.parameter %}
        {% with form.initial.parameter as parameter %}
        <div class="" style="{% if parameter.connection_type == 'OUTPUT_CONNECTION' %}display:none;{% endif %}"
                             {% if parameter.connection_type == 'INPUT_CONNECTION' %}disabled="disabled"{% endif %}>
        {% endwith %}
    {% else %}
        {% with form.instance.parameter as parameter %}
        <div class="" style="{% if parameter.connection_type == 'OUTPUT_CONNECTION' %}display:none;{% endif %}"
                             {% if parameter.connection_type == 'INPUT_CONNECTION' %}disabled="disabled"{% endif %}>
        {% endwith %}
    {% endif %}
    <div>


        {% for field in form.visible_fields %}
            {% if field.name == 'value' %}
                <span>{{ field.label }}</span><br />
                {{ field.errors }}
                {{ field }}
            {% endif %}
        {% endfor %}
        {% for field in form.hidden_fields %}
            {{ field }}
        {% endfor %}
        <input id="{{ form.prefix }}-is_input" type="hidden" value="{% firstof form.initial.parameter.is_input form.instance.parameter.is_input %}" name="{{ form.prefix }}-is_input"/>
        <input id="{{ form.prefix }}-is_output" type="hidden" value="{% firstof form.initial.parameter.is_output form.instance.parameter.is_output %}" name="{{ form.prefix }}-is_output"/>
        <br/>
        {{ form.parameter }}<br/>
    </div>
{% endfor %}
{{ formset.management_form }}
