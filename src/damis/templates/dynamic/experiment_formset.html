{% load i18n %}
{% get_current_language as lang %}

<form id="experiment-form" action="." method="post">{% csrf_token %}
    <input id="id_title" type="text" name="title" maxlength="255" placeholder="{% trans "Title" %}" style="font-size:16pt; height:16pt;">
    <button class="btn btn-primary offset1"
            type="button" id="execute-btn">{% trans "Execute" %}</button>
    {{ task_formset.management_form }}
    <div style="display: none;">
        {% for task in task_formset.forms %}
        {% trans 'Task' %}
        <div class="inline task">
            <div>
                {{ task.non_field_errors }}
                {% for field in task.visible_fields %}
                    <p>{{ field.errors}}
                    {{ field.label }}:<br/>
                    {% if field.name == 'algorithm' %} 
                    <span class='algorithm-selection'>{{ field }}</span>
                    {% else %}
                    {{ field }}
                    {% endif %}
                    </p>
                {% endfor %}
                {% for field in task.hidden_fields %}
                    {{ field }}
                {% endfor %}
            </div>
            <div class="parameter-values">
                {% if task.parameter_values %}
                {% for formset in task.parameter_values %}
                    <div>
                        {{ formset.as_p }}
                    </div>
                {% endfor %}
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div> 
    <div id="data-input-container" style="display:none;">{{ dataset_form.as_p }}</div>
    <div id="task-forms"></div>
</form>
